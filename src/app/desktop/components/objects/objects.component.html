<app-menu
    (updateItems)="activeButton = 'items';itemOpen = false;listMode = true; filtersInnerActive = false; listActive();get_list(100, 'menu')" (Logging)="changeLog($event)" (Paying)="changePay($event)"></app-menu>
<div class="filters-menu-desktop" (window:resize)="onResize()">
    <div class="mapTopButtons" *ngIf="activeButton != 'obj'">
        <div class="mapTopButton" style="border-right: none;" [class.disable]="drawActive == false"
             *ngIf="!drawActive && !clearActive  "
             (click)="panorama('close'); drawActive = true; clearActive = true; panoramaActive = false">
            НАРИСОВАТЬ
        </div>
        <div class="mapTopButton active" style="border-right: 1px solid white;" *ngIf="clearActive"
             (click)="panorama('close');clearMap();drawActive = false;
    clearActive = false;panoramaActive = false;">ОЧИСТИТЬ
        </div>

        <div class="mapTopButton" [class.disable]="panoramaActive == false"
             [class.active]="drawActive == false && panoramaActive == true"
             *ngIf="!panoramaActive"
             (click)="panorama('open');panoramaActive = true;drawActive = false;clearActive = false;">
            ПАНОРАМА
        </div>
        <div class="mapTopButton active" *ngIf="panoramaActive"
             (click)="panorama('close');panoramaActive = false;drawActive = false;clearActive = false;">КАРТА
        </div>
    </div>
    <div class="filter-right-buttons">
        <div class="counter">{{countOfObjects}}</div>
        <div class="count-filters flex-col">
            <span>предложений</span>
            <span>найдено</span>
        </div>
        <div class="filters-divider"></div>
        <div class="fav-button" [class.open]=" itemsActive" (click)="get_favObjects(); activeButton = 'fav';itemsActive = false;listMode = true; listActive()"></div>
        <div class="list-button" [class.open]=" !itemsActive" (click)="activeButton = 'items';itemsActive = true;historyClose();listMode = true;listActive()"></div>
<!--        <div class="mapTopButton left active" style="border-right: 1px solid white "-->
<!--             [class.open]=" !itemsActive"-->
<!--             (click)="activeButton = 'items';itemsActive = true;historyClose();listMode = true;listActive()">-->
<!--            ВСЕ ПРЕДЛОЖЕНИЯ-->
<!--        </div>-->
<!--        <div class="mapTopButton left disable" style="border-right: 1px solid white"-->
<!--             [class.open]=" itemsActive"-->
<!--             (click)="get_favObjects(); activeButton = 'fav';itemsActive = false;listMode = true; listActive()">-->
<!--            ИЗБРАННОЕ-->
<!--        </div>-->
        <div class="list-button" [class.open]="!filtersInnerActive" (click)="checkFilters()"></div>
        <div class="list-button active" [class.open]="filtersInnerActive" (click)="checkFilters();listMode=true; listActive()"></div>
        <div class="hide-block">
            <div class="hide-button open" [class.active]="!listMode" (click)="listMode=!listMode; listActive()"></div>
        </div>

<!--        <div class="mapTopButton right disable"  [class.open]="!filtersInnerActive" (click)="checkFilters()">-->
<!--            ФИЛЬТРЫ-->
<!--        </div>-->
<!--        <div class="mapTopButton right active "-->
<!--             [class.open]="filtersInnerActive" (click)="checkFilters();listMode=true; listActive()">СПИСОК-->
<!--        </div>-->
    </div>
</div>
<div class="main-objects">
    <div class="inner-left">
        <div class="map filters-map open" id="filters-map-map1" [class.full]="!listMode"></div>
<!--        <div class="listButton1" (click)="listMode=!listMode; listActive()" *ngIf="!listMode">-->
<!--            <div class="arrowFull">-->
<!--                <div class="barArrow1-left"></div>-->
<!--                <div class="barArrow2-left"></div>-->
<!--            </div>-->
<!--        </div>-->
        <div class="filters open blur" [class.close]="!listMode">
<!--            <div class="listButton" (click)="listMode=!listMode; listActive()">-->
<!--                <div class="arrowFull">-->
<!--                    <div class="barArrow1-left"></div>-->
<!--                    <div class="barArrow2-left"></div>-->
<!--                </div>-->
<!--            </div>-->
            <div class="scroll-items open blur fav-list"
                 *ngIf="!historyActive && (activeButton == 'fav' || activeButton == 'obj') && !itemOpen">
                <app-item *ngFor="let obj of favItems, let i = index" [item]="obj" [mode]="'middle'" [loggingMode]="logged_in" [payingMode]="payed"
                          [similarOpen]="false"
                          [compareItem]="false" [watched]="watchedItems.indexOf(obj.id) != -1"
                          (favItemMode)="changeFav($event, obj)" (click)="focusOnObject($event, obj, i, 'fav')">
                </app-item>
            </div>
            <div class="scroll-items open blur common-list" (mousewheel)="listScroll($event)"
                 *ngIf="!historyActive && (activeButton == 'items' || activeButton == 'obj') && !itemOpen">
                <virtual-scroller #scroll [items]="items" [enableUnequalChildrenSizes]="true" style="height: 100%">
                    <ng-container *ngFor="let obj of scroll.viewPortItems, let i = index">
                        <item-middle *ngIf="obj.id != null" [item]="obj" [loggingMode]="logged_in" [payingMode]="payed" (showBlock)="openBlock($event)"
                                     (favItemMode)="changeFav($event, obj)" (click)="focusOnObject($event, obj, i, 'item')"></item-middle>
                    </ng-container>
                </virtual-scroller>
            </div>
            <app-item class="item-blur" *ngIf="itemOpen && activeButton == 'obj'" [compareItem]="true" [loggingMode]="logged_in" [payingMode]="payed"
                      [similarOpen]="false"
                      [compare]="false" [item]="item" [mode]="'full'" (favItemMode)="changeFav($event, '')"
                      (closeItem)="closeBlock($event)"
                      (similarItem)="item = $event" (comparison)="openBlock('compare')">
            </app-item>
        </div>

    </div>
    <app-filters class="filters-box" [count]="countOfObjects" (showlist)="checkFilters();listMode=true; listActive()"
                 (searchInCity)="setCityObjects($event)" (closeFilters)="closeBlock($event)"
                 (openBlock)="openBlock($event)" (sendEquipment)="setEquipment($event)"
                 (sendFilters)="setFilters($event)" (sendSort)="setSort($event)"></app-filters>
    <div class="filters-box">
        <div class="filters-inner">
            <div class="hideMenu" (click)="closeBlock('proposal')">
                <div class="barExit1"></div>
                <div class="barExit2"></div>
            </div>
            <div class="additionalPlan">
                <span class="planTitle" style="font-size: 20px;margin: 40px 0 15px;">Я САМ</span>
                <div class="planLine"></div>
                <div class="planText title-add">
                    <span>ДОСТУП К БАЗЕ ПРОВЕРЕННЫХ ОБЪЯВЛЕНИЙ</span>
                </div>
                <div class="planText add">
                    <div class="add-text"><span style="margin-right: 3px">1.</span><span>Проверенная база объявлений без комиссии;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">2.</span><span>Экономию от 5 000 рублей.  Нет необходимости
                оплачивать комиссиию риэлтору. Все объекты сдаются без комиссии;</span></div>
                    <div class="add-text"><span style="margin-right: 3px">3.</span><span>Вам будут приходить новые, объявления на
                почту и в раздел меню Ваши заявки (функция действительна в период действия подписки);</span></div>
                    <div class="add-text"><span style="margin-right: 3px">4.</span><span>Гибкий выбор тарифов, оплачивайте только тот
                 период, который необходим для поиска объекта;</span></div>
                </div>
                <div class="planText title-add">
                    <span>Только проверенные  объявления</span>
                </div>
                <a class="planButton" (click)="openBlock('checklogin')">ПРОДОЛЖИТЬ</a>
            </div>
        </div>
    </div>
    <app-login class="filters-box" [itemOpen]="true" (blockClose)="closeBlock($event)"></app-login>
    <div class="filters-box">
        <div class="filters-inner">
            <div class="hideMenu" (click)="closeBlock('special')">
                <div class="barExit1"></div>
                <div class="barExit2"></div>
            </div>
            <div class="additionalPlan">
                <span class="planTitle" style="font-size: 20px;margin: 40px 0 15px;">ОСОБЫЕ УСЛОВИЯ</span>
                <div class="planLine"></div>
                <div class="planText title-add">
                    <span>МЫ САМИ ПРОВЕРИМ ОБЪЯВЛЕНИЯ НА АКТУАЛЬНОСТЬ</span>
                    <span>Результат в течении часа гарантирован!</span>
                </div>
                <div class="planText add">
                    <div class="add-text"><span style="margin-right: 3px">1.</span><span>Вы выбираете пакет ОСОБЫЕ УСЛОВИЯ. Наш менеджер связывается с Вами. Уточняет детали;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">2.</span><span>Система подбирает подходящие объекты;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">3.</span><span>Отдел качества проверяет эти объекты на предмет актуальности, и безопасности;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">4.</span><span>Система высылает актуальные объекты на Вашу почту, а также они будут сохранены в  Ваши заявки. (пункт раздела меню сайта);</span>
                    </div>
                </div>
                <div class="planText title-add">
                    <span>​Только актуальные объявления</span>
                </div>
                <a class="planButton" (click)="openBlock('checklogin')">ПРОДОЛЖИТЬ</a>
            </div>
        </div>
    </div>
    <div class="filters-box">
        <div class="filters-inner">
            <div class="hideMenu" (click)="closeBlock('premium')">
                <div class="barExit1" style="width: 24px;transform: rotate(45deg) translate(14px,7px);"></div>
                <div class="barExit2"></div>
            </div>
            <div class="additionalPlan">
                <span class="planTitle" style="font-size: 20px;margin: 40px 0 15px;">ПРЕМИУМ</span>
                <div class="planLine"></div>
                <div class="planText title-add">
                    <span>СОВЕРШЕННО НОВЫЙ УРОВЕНЬ СЕРВИСА</span>
                    <span>Найдем любую недвижимость!</span>
                </div>
                <div class="planText add">
                    <div class="add-text"><span style="margin-right: 3px">1.</span><span>Ваш персональный менеджер свяжется с Вами, и поможет согласовать  Вашу заявку;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">2.</span><span>Система формирует  подборку подходящих объектов;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">3.</span><span>Отдел качества проверяет эти объекты на предмет актуальности и безопастности;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">4.</span><span>Ваш персональный менеджер прорабатывает условия сдачи объекта и сообщает Вам  время просмотра;</span>
                    </div>
                    <div class="add-text"><span style="margin-right: 3px">5.</span><span>Отчет о проделанной работе будет выслан на 
                Вашу почту, а также он будет сохранен в Сообщениях. (пункт раздела меню сайта)</span></div>
                </div>
                <a class="planButton" (click)="openBlock('checklogin')">ПРОДОЛЖИТЬ</a>
            </div>
        </div>
    </div>
</div>
